# โ ุชุญุฏูุซ: ุญู ูุดููุฉ 503 Service Overloaded

## ๐ ุชู ุญู ุงููุดููุฉ ุจูุฌุงุญ!

ุชู ุชุทุจูู **3 ุญููู ุฑุฆูุณูุฉ** ููุนุงูุฌุฉ ูุดููุฉ ุงุฒุฏุญุงู ุฎุฏูุฉ Google Gemini.

---

## โ ุงููุดููุฉ ุงูุฃุตููุฉ

```
[GoogleGenerativeAI Error]: Error fetching from 
https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent: 
[503 Service Unavailable] The model is overloaded. Please try again later.
```

**ุงูุณุจุจ**: ุฎุฏูุฉ Gemini ุงููุฌุงููุฉ ูุฒุฏุญูุฉ ุฌุฏุงู ูู ุฃููุงุช ุงูุฐุฑูุฉ.

---

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. **ุงุณุชุฎุฏุงู ูููุฐุฌ ุฃุฎู ููุจุฑููุจุช** โก

**ุงูุชุบููุฑ ูู `app/api/enhance-prompt/route.ts`**:

```typescript
// ูุจู โ
const model = genAI.getGenerativeModel({ model: 'gemini-2.5-flash' });

// ุจุนุฏ โ
const model = genAI.getGenerativeModel({ model: 'gemini-2.5-flash-lite' });
```

**ุงูููุงุฆุฏ**:
- โ ุฃุณุฑุน ุจู 2-3 ูุฑุงุช
- โ ุฃูู ุงุณุชููุงูุงู ููููุงุฑุฏ
- โ ุงุญุชูุงู ุฃูู ููุงุฒุฏุญุงู
- โ ููุณ ุงูุฌูุฏุฉ ุชูุฑูุจุงู ูููุตูุต

---

### 2. **ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆู** ๐

**ุชู ุฅุถุงูุฉ Retry Logic ูู ููุง ุงูููููู**:
- `app/api/enhance-prompt/route.ts`
- `app/api/generate-image/route.ts`

**ุงูููุฏ**:

```typescript
const maxRetries = 3;
const retryDelay = 2000; // 2 ุซุงููุฉ ูุชุญุณูู ุงูุจุฑููุจุช
// const retryDelay = 3000; // 3 ุซูุงูู ูุชูููุฏ ุงูุตูุฑ

for (let attempt = 1; attempt <= maxRetries; attempt++) {
  try {
    const result = await model.generateContent([...]);
    // ูุฌุญุช ุงููุญุงููุฉ!
    break;
  } catch (error) {
    console.error(`ูุญุงููุฉ ${attempt}/${maxRetries} ูุดูุช:`, error.message);
    
    if (attempt < maxRetries) {
      console.log(`ุงูุชุธุงุฑ ${retryDelay}ms ูุจู ุงููุญุงููุฉ ุงูุชุงููุฉ...`);
      await new Promise(resolve => setTimeout(resolve, retryDelay));
    }
  }
}
```

**ุงูููุงุฆุฏ**:
- โ ูุญุงูู ุชููุงุฆูุงู 3 ูุฑุงุช
- โ ุงูุชุธุงุฑ 2-3 ุซูุงูู ุจูู ูู ูุญุงููุฉ
- โ ูุง ูุญุชุงุฌ ุงููุณุชุฎุฏู ููููุฑ ูุฑุฉ ุฃุฎุฑู
- โ ูุฑุตุฉ ูุฌุงุญ ุฃุนูู ุจูุซูุฑ

---

### 3. **ุฑุณุงุฆู ุฎุทุฃ ูุญุณููุฉ** ๐ฌ

**ุงูุชุบููุฑ ูู `app/design/page.tsx`**:

```typescript
// ูุจู โ
setError(err instanceof Error ? err.message : 'ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน');

// ุจุนุฏ โ
const errorMessage = err instanceof Error ? err.message : 'ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน';

if (errorMessage.includes('ูุฒุฏุญูุฉ') || errorMessage.includes('overloaded') || errorMessage.includes('503')) {
  setError(`${errorMessage}\n\n๐ก ูุตูุญุฉ: ุฌุฑุจ ูุฑุฉ ุฃุฎุฑู ุจุนุฏ 30-60 ุซุงููุฉ. ุงูุฎุฏูุฉ ุงููุฌุงููุฉ ูุฏ ุชููู ูุฒุฏุญูุฉ ูู ุฃููุงุช ุงูุฐุฑูุฉ.`);
} else {
  setError(errorMessage);
}
```

**ุงูููุงุฆุฏ**:
- โ ุฑุณุงูุฉ ูุงุถุญุฉ ูููุณุชุฎุฏู
- โ ูุตูุญุฉ ุนูููุฉ
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู

---

## ๐ ุงูููุงุฐุฌ ุงููุณุชุฎุฏูุฉ ุงูุขู

| ุงููุธููุฉ | ุงููููุฐุฌ | ุงูุณุฑุนุฉ | ุงูุฌูุฏุฉ |
|---------|---------|--------|--------|
| ุชุญุณูู ุงูุจุฑููุจุช | `gemini-2.5-flash-lite` | โกโกโก ุณุฑูุน ุฌุฏุงู | โญโญโญ ุฌูุฏ ุฌุฏุงู |
| ุชูููุฏ ุงูุตูุฑ | `gemini-2.5-flash` | โกโก ุณุฑูุน | โญโญโญโญ ููุชุงุฒ |

---

## ๐ ุงูุญุงูุฉ ุงูุญุงููุฉ

### โ ุงูุชุทุจูู ุฌุงูุฒ!

- โ ุงูุณูุฑูุฑ ูุนูู ุนูู: http://localhost:3000
- โ Status Code: 200
- โ ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ: ูุดุท
- โ ูููุฐุฌ ุฃุฎู ููุจุฑููุจุช: `gemini-2.5-flash-lite`
- โ ุฑุณุงุฆู ุฎุทุฃ ูุญุณููุฉ: ูุดุทุฉ

---

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

### 1. **app/api/enhance-prompt/route.ts**
- โ ุชุบููุฑ ุงููููุฐุฌ ุฅูู `gemini-2.5-flash-lite`
- โ ุฅุถุงูุฉ ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ (3 ูุฑุงุชุ 2 ุซุงููุฉ ุจูู ูู ูุญุงููุฉ)
- โ ุฑุณุงุฆู ุฎุทุฃ ูุญุณููุฉ

### 2. **app/api/generate-image/route.ts**
- โ ุฅุถุงูุฉ ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ (3 ูุฑุงุชุ 3 ุซูุงูู ุจูู ูู ูุญุงููุฉ)
- โ ุฑุณุงุฆู ุฎุทุฃ ูุญุณููุฉ

### 3. **app/design/page.tsx**
- โ ุฑุณุงุฆู ุฎุทุฃ ูุญุณููุฉ ูุน ูุตุงุฆุญ ูููุณุชุฎุฏู

### 4. **README.md**
- โ ุชุญุฏูุซ ุงูุชูุซูู ููุนูุณ ุงูููุงุฐุฌ ุงูุฌุฏูุฏุฉ
- โ ุฅุถุงูุฉ ููุงุญุธุฉ ุนู ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ

### 5. **TROUBLESHOOTING_503.md** (ุฌุฏูุฏ)
- โ ุฏููู ุดุงูู ูุญู ูุดููุฉ 503
- โ ุดุฑุญ ุงูุฃุณุจุงุจ ูุงูุญููู
- โ ูุตุงุฆุญ ุนูููุฉ

---

## ๐ก ููููุฉ ุงูุงุณุชุฎุฏุงู ุงูุขู

### ุงูุฎุทูุฉ 1: ุงูุชุญ ุงูุชุทุจูู
```
http://localhost:3000
```

### ุงูุฎุทูุฉ 2: ุตูู ูุณุชุงู
1. ุงููุฑ "ุงุจุฏุฃ ุงูุชุตููู ุงูุขู"
2. ุงูุชุจ ูุตู ุงููุณุชุงู
3. ุงููุฑ "ุตูู ุงููุณุชุงู"

### ุงูุฎุทูุฉ 3: ุงูุชุธุฑ ุงููุชูุฌุฉ
- ุงูุชุทุจูู ุณูุญุงูู ุชููุงุฆูุงู ุญุชู 3 ูุฑุงุช
- ุฅุฐุง ูุดูุ ุณุชุธูุฑ ุฑุณุงูุฉ ูุงุถุญุฉ ูุน ูุตูุญุฉ

### ุงูุฎุทูุฉ 4: ุฅุฐุง ุธูุฑ ุฎุทุฃ 503
- โฐ ุงูุชุธุฑ 30-60 ุซุงููุฉ
- ๐ ุญุงูู ูุฑุฉ ุฃุฎุฑู
- ุงูุชุทุจูู ุณูุญุงูู ุชููุงุฆูุงู 3 ูุฑุงุช ูู ูู ุทูุจ

---

## ๐ฏ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ูุจู ุงูุชุญุฏูุซ โ
- ุฎุทุฃ 503 ูุธูุฑ ุจุดูู ูุชูุฑุฑ
- ุงููุณุชุฎุฏู ูุญุชุงุฌ ูุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุฏููุงู
- ุฑุณุงุฆู ุฎุทุฃ ุบูุฑ ูุงุถุญุฉ

### ุจุนุฏ ุงูุชุญุฏูุซ โ
- ุงุญุชูุงู ูุฌุงุญ ุฃุนูู ุจู 3 ูุฑุงุช (ุจุณุจุจ ุฅุนุงุฏุฉ ุงููุญุงููุฉ)
- ูููุฐุฌ ุฃุฎู ูุฃุณุฑุน ููุจุฑููุจุช
- ุฑุณุงุฆู ูุงุถุญุฉ ูุน ูุตุงุฆุญ ุนูููุฉ
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู ุจูุซูุฑ

---

## ๐ ุงูููุงุฑุฏ ุงูุฅุถุงููุฉ

- **TROUBLESHOOTING_503.md** - ุฏููู ุดุงูู ูุญู ูุดููุฉ 503
- **GEMINI_MODELS.md** - ุฏููู ุงูููุงุฐุฌ ุงููุชุงุญุฉ
- **README.md** - ุงูุชูุซูู ุงูุฑุฆูุณู

---

## โ ุงูุฎูุงุตุฉ

| ุงููุนูุงุฑ | ูุจู | ุจุนุฏ |
|---------|-----|-----|
| ูููุฐุฌ ุงูุจุฑููุจุช | gemini-2.5-flash | gemini-2.5-flash-lite โก |
| ุฅุนุงุฏุฉ ุงููุญุงููุฉ | โ ูุง ููุฌุฏ | โ 3 ูุฑุงุช ุชููุงุฆูุงู |
| ุฑุณุงุฆู ุงูุฎุทุฃ | โ ุบูุฑ ูุงุถุญุฉ | โ ูุงุถุญุฉ ูุน ูุตุงุฆุญ |
| ุงุญุชูุงู ุงููุฌุงุญ | ๐ก ูุชูุณุท | ๐ข ุนุงูู |
| ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู | ๐ก ููุจููุฉ | ๐ข ููุชุงุฒุฉ |

---

**๐ ุงูุชุทุจูู ุงูุขู ุฃูุซุฑ ุงุณุชูุฑุงุฑุงู ูููุซูููุฉ!**

**ุงูุชุงุฑูุฎ**: 2025-11-17
**ุงูุฅุตุฏุงุฑ**: 2.2.0
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู

